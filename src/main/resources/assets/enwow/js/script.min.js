$(function(){ko.applyBindings(function(){var c=this;c.chars=ko.observableArray();c.detailsToShow=ko.observableArray();c.cloth=ko.observable(!0);c.leather=ko.observable(!0);c.mail=ko.observable(!0);c.plate=ko.observable(!0);c.healing=ko.observable(!0);c.dps=ko.observable(!0);c.tank=ko.observable(!0);c.classNames=[null,"warrior","paladin","hunter","rogue","priest","deathknight","shaman","mage","warlock","monk","druid"];c.getChars=function(){$.ajax({type:"GET",url:"/enwow/api/character/enwow",dataType:"json",
beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(a){c.chars(a);c.sortName()}})};c.selectedArmor=function(a){var b=c.chars()[a].classId;a=c.cloth()&&(5===b||8===b||9===b);var e=c.leather()&&(4===b||10===b||11===b),d=c.mail()&&(3===b||7===b),b=c.plate()&&(1===b||2===b||6===b);return a||e||d||b};c.selectedRole=function(a){var b=c.chars()[a].talents[0].selected?0:1,e=c.dps()&&"DPS"===c.chars()[a].talents[b].spec.role,d=c.healing()&&"HEALING"===c.chars()[a].talents[b].spec.role;
a=c.tank()&&"TANK"===c.chars()[a].talents[b].spec.role;return e||d||a};c.talentImage=function(a){var b=c.chars()[a].talents[0].selected?0:1;return"http://media.blizzard.com/wow/icons/18/"+c.chars()[a].talents[b].spec.icon+".jpg"};c.detailsVisible=function(a){return-1<c.detailsToShow.indexOf(a.toString())?!0:!1};c.showDetails=function(a){console.log(a);c.detailsToShow.push(a.toString())};c.hideDetails=function(a){c.detailsToShow.remove(a.toString())};c.sortName=function(){c.chars.sort(function(a,b){return a.name==
b.name?0:a.name<b.name?-1:1})};c.sortAverageItemLevelEquipped=function(){c.chars.sort(function(a,b){return a.items.averageItemLevelEquipped==b.items.averageItemLevelEquipped?0:a.items.averageItemLevelEquipped<b.items.averageItemLevelEquipped?-1:1})};c.sortHead=function(){c.chars.sort(function(a,b){return a.items.head.itemLevel==b.items.head.itemLevel?0:a.items.head.itemLevel<b.items.head.itemLevel?-1:1})};c.sortNeck=function(){c.chars.sort(function(a,b){return a.items.neck.itemLevel==b.items.neck.itemLevel?
0:a.items.neck.itemLevel<b.items.neck.itemLevel?-1:1})};c.sortShoulder=function(){c.chars.sort(function(a,b){return a.items.shoulder.itemLevel==b.items.shoulder.itemLevel?0:a.items.shoulder.itemLevel<b.items.shoulder.itemLevel?-1:1})};c.sortChest=function(){c.chars.sort(function(a,b){return a.items.chest.itemLevel==b.items.chest.itemLevel?0:a.items.chest.itemLevel<b.items.chest.itemLevel?-1:1})};c.sortWrist=function(){c.chars.sort(function(a,b){return a.items.wrist.itemLevel==b.items.wrist.itemLevel?
0:a.items.wrist.itemLevel<b.items.wrist.itemLevel?-1:1})};c.sortHands=function(){c.chars.sort(function(a,b){return a.items.hands.itemLevel==b.items.hands.itemLevel?0:a.items.hands.itemLevel<b.items.hands.itemLevel?-1:1})};c.sortWaist=function(){c.chars.sort(function(a,b){return a.items.waist.itemLevel==b.items.waist.itemLevel?0:a.items.waist.itemLevel<b.items.waist.itemLevel?-1:1})};c.sortLegs=function(){c.chars.sort(function(a,b){return a.items.legs.itemLevel==b.items.legs.itemLevel?0:a.items.legs.itemLevel<
b.items.legs.itemLevel?-1:1})};c.sortFeet=function(){c.chars.sort(function(a,b){return a.items.feet.itemLevel==b.items.feet.itemLevel?0:a.items.feet.itemLevel<b.items.feet.itemLevel?-1:1})};c.sortFinger=function(){c.chars.sort(function(a,b){var c=Math.min(a.items.finger1.itemLevel,a.items.finger2.itemLevel),d=Math.min(b.items.finger1.itemLevel,b.items.finger2.itemLevel);return c==d?0:c<d?-1:1})};c.sortTrinket=function(){c.chars.sort(function(a,b){var c=Math.min(a.items.trinket1.itemLevel,a.items.trinket2.itemLevel),
d=Math.min(b.items.trinket1.itemLevel,b.items.trinket2.itemLevel);return c==d?0:c<d?-1:1})};c.sortMainHand=function(){c.chars.sort(function(a,b){return a.items.mainHand.itemLevel==b.items.mainHand.itemLevel?0:a.items.mainHand.itemLevel<b.items.mainHand.itemLevel?-1:1})};c.sortOffHand=function(){c.chars.sort(function(a,b){return"undefined"===typeof a.items.offHand?1:"undefined"===typeof b.items.offHand?-1:a.items.offHand.itemLevel==b.items.offHand.itemLevel?0:a.items.offHand.itemLevel<b.items.offHand.itemLevel?
-1:1})};c.getTooltip=function(a){var b="item="+a.id;a=a.tooltipParams;"undefined"!==typeof a.enchant&&(b+="&ench="+a.enchant);"undefined"!==typeof a.gem0&&(b+="&gems="+a.gem0);"undefined"!==typeof a.gem1&&(b+=":"+a.gem1);"undefined"!==typeof a.gem2&&(b+=":"+a.gem2);return b};c.getChars()}())});